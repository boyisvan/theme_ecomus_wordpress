(function(f){"use strict";var g=g||{};g.init=function(){g.$body=f(document.body),g.$window=f(window),g.$header=f("#site-header");this.singleProductGallery();this.productImageZoom();g.$body.on("ecomus_product_gallery_zoom",function(){g.productImageZoom()});this.productLightBox();this.productThumbnailVideo();this.ecomusMore();this.productVariation();this.productTabsDropdown();this.upsellsProductCarousel();this.relatedProductCarousel();this.recentlyViewedProductsCarousel()};g.productGallery=function(o,t=f(".woocommerce-product-gallery")){if(typeof Swiper==="undefined"){return}var i=f(window);var r=null;var s=null;function a(e,t){if(e.length<1){return}return new Swiper(e.get(0),t)}function e(e){e.enable()}function n(e){e.disable()}function c(e){var t={loop:false,autoplay:false,speed:800,watchOverflow:true,autoHeight:true,navigation:{nextEl:e.find(".swiper-button-next").get(0),prevEl:e.find(".swiper-button-prev").get(0)},on:{init:function(){setTimeout(function(){e.css("opacity",1)},100);g.$body.trigger("ecomus_product_gallery_init")},slideChange:function(){if(this.slides[this.realIndex].getAttribute("data-zoom_status")=="false"){this.$el.parent().addClass("swiper-item-current-extra")}else{if(this.$el.parent().hasClass("swiper-item-current-extra")){this.$el.parent().removeClass("swiper-item-current-extra")}}},slideChangeTransitionEnd:function(){g.$body.trigger("ecomus_product_gallery_slideChangeTransitionEnd")}}};if(s){t.thumbs={swiper:s}}return t}function l(){var e=t.find(".woocommerce-product-gallery__wrapper");e.addClass("woocommerce-product-gallery__slider swiper");e.wrapInner('<div class="swiper-wrapper"></div>');e.find(".swiper-wrapper").after('<span class="ecomus-svg-icon em-button-light ecomus-swiper-button swiper-button swiper-button-prev"><svg width="7" height="11" viewBox="0 0 7 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 11L0 5.5L5.5 0L6.47625 0.97625L1.9525 5.5L6.47625 10.0238L5.5 11Z" fill="currentColor"/></svg></span>');e.find(".swiper-wrapper").after('<span class="ecomus-svg-icon em-button-light ecomus-swiper-button swiper-button swiper-button-next"><svg width="7" height="11" viewBox="0 0 7 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.5 11L7 5.5L1.5 0L0.52375 0.97625L5.0475 5.5L0.52375 10.0238L1.5 11Z" fill="currentColor"/></svg></span>');e.find(".woocommerce-product-gallery__image").addClass("swiper-slide");return a(e,c(e))}function d(t){var e={spaceBetween:10,watchOverflow:true,watchSlidesProgress:true,autoHeight:true,on:{beforeInit:function(){var e=1;t.find(".swiper-slide").each(function(){f(this).parent().find(".swiper-slide:nth-child("+e+")").css("--animation-delay",e*3/10+"s");e++})},init:function(){setTimeout(function(){t.css("opacity",1)},100);g.$body.trigger("ecomus_product_thumbnails_init")}}};if(o){e.breakpoints={0:{direction:"horizontal",slidesPerView:5},1200:{direction:"vertical",slidesPerView:"auto"}}}else{e.direction="horizontal";e.slidesPerView=5}return e}function u(){var e=t.find(".ecomus-product-gallery-thumbnails");e.addClass("swiper");e.wrapInner('<div class="woocommerce-product-thumbnail__nav swiper-wrapper"></div>');e.find(".woocommerce-product-gallery__image").addClass("swiper-slide");return a(e,d(e))}function p(){if(i.width()<1200){e(s);e(r)}else{n(s);n(r)}}function m(){t.imagesLoaded(function(){var e=t.find(".ecomus-product-gallery-thumbnails");e.appendTo(t);s=u();r=l();if(typeof ecomusData.product_gallery_slider!=="undefined"&&!ecomusData.product_gallery_slider){t.addClass("woocommerce-product-gallery--reponsive");p();i.on("resize",function(){p()})}})}m()};g.singleProductGallery=function(){var e=f("div.product .woocommerce-product-gallery");if(!e.length){return}if(e.hasClass("woocommerce-product-gallery--vertical")){f(".woocommerce-product-gallery").on("product_thumbnails_slider_vertical wc-product-gallery-after-init",function(){g.productGallery(true)})}else{g.productGallery(false);f(".woocommerce-product-gallery").on("product_thumbnails_slider_horizontal",function(){g.productGallery(false)})}};g.productImageZoom=function(){if(typeof Drift==="undefined"){return}var e=f(".product-gallery-summary");if(!e){return}if(ecomusData.product_image_zoom=="none"){return}var t=e.find(".entry-summary"),o=e.find(".woocommerce-product-gallery__wrapper");if(ecomusData.product_image_zoom=="bounding"){var i=f('<div class="ecomus-product-zoom-wrapper" />');t.prepend(i)}var r={containInline:true};if(ecomusData.product_image_zoom=="bounding"){r.paneContainer=i.get(0);r.hoverBoundingBox=true;r.zoomFactor=2}if(ecomusData.product_image_zoom=="inner"){r.zoomFactor=3}if(ecomusData.product_image_zoom=="magnifier"){r.zoomFactor=2;r.inlinePane=true}o.find(".woocommerce-product-gallery__image").each(function(){var e=f(this),t=e.find("img"),o=e.find("a").attr("href");if(e.hasClass("ecomus-product-video")||e.data("zoom_status")==false){return}if(ecomusData.product_image_zoom=="inner"){r.paneContainer=e.get(0)}t.attr("data-zoom",o);new Drift(t.get(0),r)});f(".single-product div.product .product-gallery-summary .variations_form").on("show_variation hide_variation",function(){var e=f(this).closest(".product-gallery-summary"),t=e.find(".woocommerce-product-gallery__wrapper .woocommerce-product-gallery__image").eq(0),o=t.find("a").attr("href"),i=t.find("img");i.attr("data-zoom",o)});g.$window.on("resize",function(){if(g.$window.width()<1200){if(!f(".single-product div.product .woocommerce-product-gallery").hasClass("woocommerce-product-gallery--has-zoom")){return}var e=false;f(".woocommerce-product-gallery--has-zoom .woocommerce-product-gallery__image").on("touchstart",function(){e=true});f(".woocommerce-product-gallery--has-zoom .woocommerce-product-gallery__image").on("touchmove",function(){e=false});f(".woocommerce-product-gallery--has-zoom .woocommerce-product-gallery__image").on("touchend",function(){if(e){f(this).addClass("zoom-enable")}else{f(this).removeClass("zoom-enable")}})}})};g.ecomusMore=function(){var e=f(document).find(".short-description__content"),t=ecomusData.product_description_lines,o=parseInt(e.css("line-height"))*t;e.each(function(){var e=f(this).outerHeight();if(e>o){f(this).siblings(".short-description__more").removeClass("hidden")}});f(document.body).on("click",".short-description__more",function(e){e.preventDefault();var t=f(this).data("settings"),o=t.more,i=t.less;if(f(this).hasClass("less")){f(this).removeClass("less");f(this).text(o);f(this).siblings(".short-description__content").removeAttr("style")}else{f(this).addClass("less");f(this).text(i);f(this).siblings(".short-description__content").css("-webkit-line-clamp","inherit")}})};g.productVariation=function(){var t=f(".single-product div.product .product-gallery-summary .em-countdown-single-product").html();f(".single-product div.product .product-gallery-summary .variations_form").on("show_variation",function(){var e=f(this).closest(".product-gallery-summary").find(".em-countdown-single-product"),t=f(this).find(".variation_id").val(),o=f(this).find(".variation-id-"+t).html();e.fadeOut().addClass("hidden");if(o&&t!=="0"){e.html(o);e.fadeIn().removeClass("hidden")}e.find(".ecomus-countdown").ecomus_countdown()});f(".single-product div.product .product-gallery-summary .variations_form").on("hide_variation",function(){var e=f(this).closest(".product-gallery-summary").find(".em-countdown-single-product");if(t){e.fadeOut().addClass("hidden");e.html(t)}e.find(".ecomus-countdown").ecomus_countdown()})};g.productLightBox=function(){var e=f(".woocommerce-product-gallery");if(!e){return}if(!ecomusData.product_image_lightbox){return}t();g.$body.on("ecomus_product_gallery_lightbox",function(){t()});f(document).on("click",".ecomus-button--product-lightbox",function(e){e.preventDefault();var t=f(".pswp")[0],o=a(f(this).siblings(".woocommerce-product-gallery__wrapper").find(".woocommerce-product-gallery__image")),i=f(this).siblings(".woocommerce-product-gallery__wrapper").find(".swiper-slide-active");var r=f.extend({index:f(i).index(),addCaptionHTMLFn:function(e,t){if(!e.title){t.children[0].textContent="";return false}t.children[0].textContent=e.title;return true}},wc_single_product_params.photoswipe_options);var s=new PhotoSwipe(t,PhotoSwipeUI_Default,o,r);s.init()});function t(){f(".woocommerce-product-gallery__image").on("click","a",function(e){return false});e.append('<a href="#" class="ecomus-button--product-lightbox em-flex em-flex-align-center em-flex-center"><span class="ecomus-svg-icon ecomus-svg-icon--fullscreen"><svg width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.672 17.0111L17.672 12.0526L16.4091 12.0526L16.4091 15.4846L11.5285 10.604L10.6352 11.4972L15.5158 16.3778L12.082 16.3796L12.082 17.6425L17.0405 17.6425C17.3878 17.6407 17.6701 17.3584 17.672 17.0111ZM2.48608 16.3778L5.91808 16.3778L5.91808 17.6407L0.961377 17.6425C0.78679 17.6425 0.628951 17.5701 0.515665 17.4568C0.40053 17.3417 0.329985 17.1856 0.329948 17.0111L0.329912 12.0525H1.59277V15.4845L6.47335 10.6039L7.36662 11.4972L2.48604 16.3778L2.48608 16.3778ZM15.514 1.56337H12.082L12.0819 0.300476L17.0405 0.300512C17.1234 0.300625 17.2054 0.317088 17.2819 0.348957C17.3584 0.380826 17.4278 0.427474 17.4862 0.486229C17.6032 0.603249 17.6719 0.764822 17.6719 0.931941L17.6701 5.88864L16.4072 5.88864L16.4072 2.45664L11.5267 7.33722L10.6334 6.44395L15.514 1.56337ZM6.47523 7.33722L7.3685 6.44395L2.48608 1.56152L5.91993 1.56337L5.91808 0.298663L0.961377 0.300512C0.878435 0.300435 0.796292 0.316715 0.719649 0.34842C0.643005 0.380126 0.573367 0.426633 0.514718 0.485282C0.456069 0.543931 0.409562 0.613569 0.377857 0.690212C0.346151 0.766856 0.329871 0.848999 0.329948 0.931941L0.328062 5.88868L1.59277 5.89053L1.59281 2.45479L6.47523 7.33722Z"></path></svg></span></a>')}function a(e){var c=[];if(e.length>0){e.each(function(e,t){var o=f(t).find("img");if(o.length){var i=o.attr("data-large_image"),r=o.attr("data-large_image_width"),s=o.attr("data-large_image_height"),a=o.attr("alt"),n={alt:a,src:i,w:r,h:s,title:o.attr("data-caption")?o.attr("data-caption"):o.attr("title")};c.push(n)}})}return c}};g.productTabsDropdown=function(){var e=f(".woocommerce-tabs--dropdown");if(!e){return}if(ecomusData.product_tabs_layout!=="accordion"){return}e.on("click",".woocommerce-tabs-title",function(){if(f(this).hasClass("active")){if(f(this).closest(".woocommerce-tabs--dropdown").hasClass("wc-tabs-first--opened")){f(this).closest(".woocommerce-tabs--dropdown").removeClass("wc-tabs-first--opened")}f(this).removeClass("active");f(this).siblings(".woocommerce-tabs-content").slideUp(200)}else{f(this).addClass("active");f(this).siblings(".woocommerce-tabs-content").slideDown(200)}})};g.upsellsProductCarousel=function(){g.productsCarousel(f(".products.upsells"))};g.relatedProductCarousel=function(){g.productsCarousel(f(".products.related"))};g.recentlyViewedProductsCarousel=function(){g.productsCarousel(f(".recently-viewed-products"))};g.productsCarousel=function(e){if(!e.length){return}var t=e.find("ul.products");t.wrap('<div class="products-carousel swiper ecomus-carousel--elementor" data-spacing="30"></div>');t.after('<span class="ecomus-svg-icon em-button-light ecomus-swiper-button swiper-button swiper-button-prev"><svg width="7" height="11" viewBox="0 0 7 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 11L0 5.5L5.5 0L6.47625 0.97625L1.9525 5.5L6.47625 10.0238L5.5 11Z" fill="currentColor"/></svg></span>');t.after('<span class="ecomus-svg-icon em-button-light ecomus-swiper-button swiper-button swiper-button-next"><svg width="7" height="11" viewBox="0 0 7 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.5 11L7 5.5L1.5 0L0.52375 0.97625L5.0475 5.5L0.52375 10.0238L1.5 11Z" fill="currentColor"/></svg></span>');t.after('<div class="swiper-pagination swiper-pagination-bullet--small"></div>');t.addClass("swiper-wrapper");t.find("li.product").addClass("swiper-slide");var o=t.closest(".products-carousel"),i=o.find(".product-thumbnail");var r={loop:false,autoplay:false,speed:800,watchSlidesVisibility:true,watchOverflow:true,navigation:{nextEl:o.find(".ecomus-swiper-button.swiper-button-next").get(0),prevEl:o.find(".ecomus-swiper-button.swiper-button-prev").get(0)},pagination:{el:o.find(".swiper-pagination").get(0),type:"bullets",clickable:true},on:{init:function(){this.$el.css("opacity",1)},resize:function(){var o=this;if(i.length>0){i.imagesLoaded(function(){var e=i.outerHeight(),t=e/2+15+"px";f(o.navigation.$nextEl).css({"--em-arrow-top":t});f(o.navigation.$prevEl).css({"--em-arrow-top":t})})}}},spaceBetween:o.data("spacing"),breakpoints:{300:{slidesPerView:2,slidesPerGroup:2,spaceBetween:15},768:{slidesPerView:3,spaceBetween:o.data("spacing")},1200:{slidesPerView:4}}};new Swiper(o.get(0),r)};g.productThumbnailVideo=function(){g.$body.on("ecomus_product_thumbnails_init",function(){var e=f(".woocommerce-product-gallery"),t=e.find(".woocommerce-product-thumbnail__nav"),o=e.find(".woocommerce-product-gallery__image.ecomus-product-video");if(o.length>0){var i=o.index();e.addClass("has-video");t.find(".woocommerce-product-gallery__image").eq(i).append('<div class="ecomus-i-video"></div>')}});g.$body.on("ecomus_product_gallery_init",function(){var e=f(".woocommerce-product-gallery__wrapper"),t=e.find(".swiper-slide");t.each(function(){var e=f(this).find(".ecomus-video-wrapper");if(f(this).hasClass("swiper-slide-active")){if(e.length>0){if(e.hasClass("video-youtube")){e.find("iframe").attr("src",e.find("iframe").attr("src")+"&enablejsapi=1&playsinline=1&mute=1&playerapiid=ytplayer&showinfo=0&fs=0&modestbranding=0&rel=0&loop=1&html5=1&autoplay=1")}else if(e.hasClass("video-vimeo")){e.find("iframe").attr("src",e.find("iframe").attr("src")+"&api=1&autoplay=1&muted=1&loop=1")}}}else{if(e.length>0){if(e.hasClass("video-youtube")){e.find("iframe").attr("src",e.find("iframe").attr("src")+"&enablejsapi=1&playsinline=1&mute=1&playerapiid=ytplayer&showinfo=0&fs=0&modestbranding=0&rel=0&loop=1&html5=1")}else if(e.hasClass("video-vimeo")){e.find("iframe").attr("src",e.find("iframe").attr("src")+"&api=1&muted=1&loop=1")}}}})});g.$body.on("ecomus_product_gallery_slideChangeTransitionEnd",function(){var e=f(".woocommerce-product-gallery__wrapper"),t=e.find(".swiper-slide");t.each(function(){var e=f(this).find(".ecomus-video-wrapper");if(f(this).hasClass("swiper-slide-active")){if(e.length>0){if(e.hasClass("video-youtube")){e.find("iframe").get(0).contentWindow.postMessage('{"event":"command","func":"'+"playVideo"+'","args":""}',"*")}else if(e.hasClass("video-vimeo")){e.find("iframe").get(0).contentWindow.postMessage('{"method":"play","value":""}',"*")}else{e.find("video").get(0).play()}}}else{if(e.length>0){if(e.hasClass("video-youtube")){e.find("iframe").get(0).contentWindow.postMessage('{"event":"command","func":"'+"pauseVideo"+'","args":""}',"*")}else if(e.hasClass("video-vimeo")){e.find("iframe").get(0).contentWindow.postMessage('{"method":"pause","value":""}',"*")}else{e.find("video").get(0).pause()}}}})})};g.init()})(jQuery);